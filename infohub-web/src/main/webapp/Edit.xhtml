<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition>

        <p:dialog id="PartnerEditDlg" widgetVar="PartnerEditDialog" resizable="true" modal="true"  minWidth="1024" width="1024"  minHeight="300" height="550" maximizable="true" closable="false"  appendTo="@(body)" >

            <f:facet name="header">
                <h:outputText id="DialogHeaderPartner" value="EDIT: #{partnerController.selected.partnerName}"/>
            </f:facet>
            <div class="container-fluid">
                <h:form id="PartnerEditForm">
                    <div class="row">
                        <div class="col-md-2 pull-right">
                            <p:commandButton  actionListener="#{partnerController.update}" process="@form"   value="Save" update=":formPartner :msgs"  oncomplete="handleSubmit(args, 'PartnerEditDialog');PF('tablePartner').clearFilters();"/>
                            <p:commandButton actionListener="#{partnerController.cancel}" immediate="true" value="Cancel" onclick="PartnerEditDialog.hide()"/>
                        </div>
                    </div>

                    <p:tabView id="tabView" style="margin-bottom: 5px">
                        <p:tab  title="General">
                            <div class="row">
                                <div class="col-lg-6">
                                    <p:panelGrid columns="3" columnClasses="five-percent, ninety-percent,five-percent" style="width: 100%" rendered="#{partnerController.selected != null}">
                                        <p:outputLabel value="Partner Number" for="partnerNumber" />
                                        <p:inputText autocomplete="true" validatorMessage="Parnter Number Must be unique and not emty" required="true" style="width: 100%" id="partnerNumber" value="#{partnerController.selected.partnerNumber}" title="#{bundle.CreatePartnerTitle_partnerNumber}" />
                                        <p:message for="partnerNumber"/>

                                        <p:outputLabel value="Partner Name" for="partnerName" />
                                        <p:inputText style="width: 100%" id="partnerName" value="#{partnerController.selected.partnerName}" title="#{bundle.CreatePartnerTitle_partnerName}" />
                                        <p:message for="partnerName"/>

                                        <p:outputLabel value="Group" for="partnerGroup" />
                                        <p:inputText style="width: 100%" id="partnerGroup" value="#{partnerController.selected.partnerGroup}" title="#{bundle.CreatePartnerTitle_partnerGroup}" />
                                        <p:message for="partnerGroup"/>

                                        <p:outputLabel value="Type" for="partnerType" />
                                        <p:autoComplete inputStyle="width:100%"  id="partnerType" value="#{partnerController.selected.partnerType}" title="Partner Type" completeMethod="#{partnerController.completePartnerType}" dropdown="true" dropdownMode="current" cache="true"  queryDelay="700" />
                                        <p:message for="partnerType"/>

                                        <p:outputLabel value="Country" for="country" />
                                        <p:autoComplete inputStyle="width:100%"  id="country" value="#{partnerController.selected.country}" title="#{bundle.CreatePartnerTitle_country}" completeMethod="#{partnerController.completeCountries}"  dropdown="true" dropdownMode="current" cache="true" maxResults="10"  queryDelay="700" />
                                        <p:message for="country"/>

                                        <p:outputLabel value="City" for="city" />
                                        <p:inputText style="width: 100%" id="city" value="#{partnerController.selected.city}" title="#{bundle.CreatePartnerTitle_city}" />
                                        <p:message for="city"/>

                                        <p:outputLabel value="Sales Org" for="salesOrg" />
                                        <p:inputText style="width: 100%" id="salesOrg" value="#{partnerController.selected.salesOrg}" title="#{bundle.CreatePartnerTitle_salesOrg}" />
                                        <p:message for="salesOrg"/>

                                        <p:outputLabel value="B2B Manager" for="b2bManager" />
                                        <p:autoComplete inputStyle="width:100%"  id="b2bManager" value="#{partnerController.selected.b2bManager}" title="#{bundle.CreatePartnerTitle_b2bManager}" completeMethod="#{partnerController.completeB2BManagers}" dropdown="true" dropdownMode="current" cache="true" maxResults="10"  queryDelay="700" />
                                        <p:message for="b2bManager"/>

                                        <p:outputLabel value="Region" for="region" />
                                        <p:autoComplete inputStyle="width:100%"  id="region" value="#{partnerController.selected.region}" title="#{bundle.CreatePartnerTitle_region}" completeMethod="#{partnerController.completeRegions}"  dropdown="true" dropdownMode="current" cache="true"  queryDelay="700"/>
                                        <p:message for="region"/>
                                    </p:panelGrid>
                                </div>
                                <div class="col-lg-6">
                                    <p:panel>
                                        <p:dataTable  style="min-height: 200px" id="tableComments" value="#{partnerController.selected.comments}" var="comment" emptyMessage="No Comments">
                                            <p:column sortBy="#{comment.updateTime}" width="30%"  headerText="Comment By"   style="font-size: 10px;padding: 1px">
                                                #{comment.commentBy} <br/>  on #{comment.updateTime.toLocaleString()} 

                                            </p:column>
                                            <p:column width="70%"   headerText="Comment" style="padding: 1px" >
                                                <p:inputTextarea    value="#{comment.commentText}" rows="3" cols="50" readonly="true"   />

                                            </p:column>
                                        </p:dataTable>
                                        <p:panel  id="commentAddPanel"   >
                                            <div class="row">
                                                <div class="col-sm-10">
                                                    <p:inputTextarea  cols="40"  style="width: 100%" id="editorComment" class="disableEvent"   onkeydown="event.stopPropagation();"   maxlength="1000" value="#{partnerController.selectedComment.commentText}"  />

                                                </div>
                                                <div class="col-sm-2 ">
                                                    <p:commandButton   icon="ui-icon-plus"  class="pull-right" process="commentAddPanel"  update="tableComments,editorComment,:msgs" id="btnAddNewComment" ajax="true" actionListener="#{partnerController.onAddNewComment}" ></p:commandButton>

                                                </div>
                                            </div>

                                        </p:panel>

                                    </p:panel>




                                </div>
                            </div>

                        </p:tab>
                        <p:tab title="Contact" >
                            <div class="row">
                                <div class="col-lg-12" >

                                    <p:dataTable resizableColumns="true" tableStyle="table-layout: auto;"  style="font-size: 12px;min-height: 200px"
                                                 id="tableContact" editable="true" value="#{partnerController.selected.contacts}" 
                                                 var="contact" editMode="cell">
                                        <p:column headerText="Delete"  style="width:50px">
                                            <p:tooltip  for="btnContactDelete" value="Delete this Entry" position="bottom"/>

                                            <p:commandButton id="btnContactDelete" class="btn btn-danger" icon="ui-icon-trash" process="@this" action="#{partnerController.doDeleteNewContact(contact)}" update="tableContact" >
                                                <p:confirm header="Confirmation" message="Delete this?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </p:column>
                                        <!--                                    <p:column headerText="Edit" style="width:32px">
                                                                                <p:tooltip  for="editContact" value="Edit this Entry" position="bottom"/>
                                                                                <p:rowEditor id="editContact" />
                                                                            </p:column>-->
                                        <p:column headerText="Contact Name">
                                            <p:inputText value="#{contact.contactName}" />
                                        </p:column>
                                        <p:column headerText="Type">

                                            <p:autoComplete  value="#{contact.contactType}" style="width:100%"  completeMethod="#{partnerController.completeContactType}" dropdown="true" dropdownMode="current"  cache="true" maxResults="8" queryDelay="700" />

                                        </p:column>
                                        <p:column headerText="Email">
                                            <p:inputText  value="#{contact.email}" style="width:100%"/>
                                        </p:column>
                                        <p:column headerText="Phone">
                                            <p:inputText value="#{contact.telephone}" />
                                        </p:column>

                                    </p:dataTable>
                                    <div class="ui-datatable-header ui-widget-header ui-corner-top text-center">Add New Contact</div>
                                    <table jsf:id="tableContactNew" class=" noupdate table-bordered table-striped" style="font-size: 12px" width="100%" >
                                        <tr>
                                            <th>ADD</th>
                                            <th>Name*</th>
                                            <th>Type*</th>
                                            <th>Email</th>
                                            <th>Telephone</th>
                                        </tr>
                                        <tr>
                                            <td>
                                                <p:tooltip  for="btnAddNewContact" value="Add this new Contact" position="bottom"/>
                                                <p:commandButton id="btnAddNewContact" icon="ui-icon-plus" actionListener="#{partnerController.onAddNewContact}" process="@parent" update="tableContact tableContactNew :msgs"/>
                                            </td>
                                            <td>
                                                <h:inputText id="contactName" value="#{partnerController.selectedContact.contactName}"/>
                                            </td>
                                            <td>
                                                <p:autoComplete id="contactType" value="#{partnerController.selectedContact.contactType}" completeMethod="#{partnerController.completeContactType}" dropdown="true" dropdownMode="current"  cache="true" maxResults="8" queryDelay="700" />

                                            </td>
                                            <td>
                                                <h:inputText id="email" value="#{partnerController.selectedContact.email}"/>   
                                            </td>
                                            <td>
                                                <h:inputText id="telephone" value="#{partnerController.selectedContact.telephone}"/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>

                                            </td>
                                            <td>
                                                <h:message for="contactName"  style="color: red"/>
                                            </td>
                                            <td>
                                                <h:message for="contactType"  style="color: red"/>
                                            </td>
                                            <td>
                                                <h:message for="email"  style="color: red"/>
                                            </td>
                                            <td>
                                                <h:message for="telephone"  style="color: red"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </p:tab>

                        <p:tab title="Technical">
                            <div class="row">
                                <p:dataTable  resizableColumns="true"   id="tableTechnical" style="font-size: 10px;min-height: 200px"  value="#{partnerController.selected.technicls}" var="technical">
                                    <f:facet name="header">
                                        Existing Technicals 
                                    </f:facet>
                                    <p:column headerText="Delete" style="width:50px">
                                        <p:tooltip  for="btnTechnicalDelete" value="Delete this Entry" position="bottom"/>
                                        <p:commandButton id="btnTechnicalDelete" class="btn btn-danger" icon="ui-icon-trash" process="@this" action="#{partnerController.doDeleteNewTechnical(technical)}" update="tableTechnical" >
                                            <p:confirm header="Confirmation" message="Delete this?" icon="ui-icon-alert" />

                                        </p:commandButton>
                                    </p:column>

                                    <p:column style="padding: 0; width: 100px" headerText="Connection">

                                        <p:autoComplete inputStyle="width:100%"  value="#{technical.connectionType}" completeMethod="#{partnerController.completeConnections}" dropdown="true" dropdownMode="current" />

                                    </p:column>
                                    <p:column style="padding: 0; width: 100px" headerText="Id">
                                        <p:inputText style="width:100%"  value="#{technical.techid}"   />
                                    </p:column>

                                    <p:column style="padding: 0;width: 100px" headerText="Bus Procs.">
                                        <p:autoComplete inputStyle="width:100%" value="#{technical.businessProcess}"  completeMethod="#{partnerController.completeBussProecss}" maxResults="8" queryDelay="700" dropdown="true" dropdownMode="current"  />
                                    </p:column>
                                    <p:column style="padding: 0;width: 100px" headerText="Source Messg.">
                                        <p:autoComplete inputStyle="width:100%"  value="#{technical.sourceMessage}" completeMethod="#{partnerController.completeSourceMessage}" cache="true" maxResults="8" queryDelay="700" />
                                    </p:column>

                                    <p:column style="padding: 0;width: 100px" headerText="Target Messg.">
                                        <p:autoComplete inputStyle="width:100%"  value="#{technical.targetMessage}" completeMethod="#{partnerController.completeTargetMessage}" cache="true" maxResults="8" queryDelay="700"  style="width:100%"/>
                                    </p:column>
                                    <p:column style="padding: 0;width: 100px" headerText="Direction">
                                        <p:autoComplete inputStyle="width:100%"  value="#{technical.direction}" completeMethod="#{partnerController.completeDirection}" cache="true" maxResults="8" queryDelay="700" style="width:100%"/>
                                    </p:column>
                                    <p:column style="padding: 0" headerText="Standard">
                                        <p:autoComplete inputStyle="width:100%"  value="#{technical.standard}" completeMethod="#{partnerController.completeStandards}" cache="true" maxResults="8" queryDelay="700" style="width:100%"/>
                                    </p:column>
                                    <p:column style="padding: 0" headerText="TN From">
                                        <p:autoComplete inputStyle="width:100%" value="#{technical.tnFrom}" completeMethod="#{partnerController.completeTnFrom}" cache="true" maxResults="8" queryDelay="700" style="width:100%"/>
                                    </p:column>
                                    <p:column style="padding: 0" headerText="TN To">
                                        <p:autoComplete  inputStyle="width:100%"  value="#{technical.tnTo}" completeMethod="#{partnerController.completeTnTo}" cache="true" maxResults="8" queryDelay="700" style="width:100%"/>
                                    </p:column>
                                    <p:column style="padding: 0" headerText="Prio">
                                        <p:inputText   value="#{technical.priority}" style="width:100%"/>
                                    </p:column>
                                    <p:column style="padding: 0" headerText="Comments">
                                        <p:inputText  value="#{technical.comments}" style="width:100%"/>
                                    </p:column>
                                </p:dataTable>
                                <div class="ui-datatable-header ui-widget-header ui-corner-top text-center">Add New Technical</div>

                                <p:panelGrid   id="tableTechnicalNew" style=" width: 100%;font-size: 10px"  class="small"  >
                                    <f:facet name="header">
                                        <p:row>

                                            <p:column style="width:50px" >#</p:column>
                                            <p:column style="width:100px">Connection</p:column>
                                            <p:column style="width:100px">ID</p:column>
                                            <p:column style="width:100px" >Buss Procss.</p:column>
                                            <p:column style="width:120px">Source Messg*</p:column>
                                            <p:column style="width:120px">Target Messg*</p:column>
                                            <p:column style="width:80px">Direction</p:column>
                                            <p:column style="width:80px">Standard</p:column>
                                            <p:column style="width:100px">TN From</p:column>
                                            <p:column style="width:100px">TN To</p:column>
                                            <p:column style="width:50px">Prio.</p:column>
                                            <p:column style="width:50px">Comments</p:column>

                                        </p:row>



                                    </f:facet>
                                    <p:row>


                                        <p:column style="padding: 0">
                                            <p:tooltip  for="btnAddNewTech" value="Add this new Technical" position="bottom"/>

                                            <p:commandButton id="btnAddNewTech" icon="ui-icon-plus"  actionListener="#{partnerController.onAddNewTechnical()}" process="tableTechnicalNew,tableTechnical" update="tableTechnical tableTechnicalNew :msgs"/>

                                        </p:column>


                                        <p:column style="padding: 0">
                                            <p:autoComplete inputStyle="width:100%" id="connType" value="#{partnerController.selectedTechnical.connectionType}"  completeMethod="#{partnerController.completeConnections}" dropdown="true" dropdownMode="current"  cache="true" maxResults="8" queryDelay="700" />

                                        </p:column>

                                        <p:column style="padding: 0">
                                            <p:inputText style="width: 100%"  id="techId" value="#{partnerController.selectedTechnical.techid}" />

                                        </p:column>


                                        <p:column style="padding: 0">
                                            <p:autoComplete inputStyle="width:100%"   id="busProcess" value="#{partnerController.selectedTechnical.businessProcess}"  completeMethod="#{partnerController.completeBussProecss}" cache="true" maxResults="8" queryDelay="700" />

                                        </p:column>

                                        <p:column style="padding: 0">
                                            <p:autoComplete inputStyle="width:100%" id="sourceMsg" value="#{partnerController.selectedTechnical.sourceMessage}"  completeMethod="#{partnerController.completeSourceMessage}"  dropdownMode="current"  maxResults="8" queryDelay="700" />

                                        </p:column>
                                        <p:column style="padding: 0">

                                            <p:autoComplete inputStyle="width:100%" id="targetMsg" value="#{partnerController.selectedTechnical.targetMessage}"  completeMethod="#{partnerController.completeTargetMessage}"  maxResults="8" queryDelay="700" />

                                        </p:column>
                                        <p:column style="padding: 0">
                                            <p:autoComplete inputStyle="width:100%" id="direction" value="#{partnerController.selectedTechnical.direction}"  completeMethod="#{partnerController.completeDirection}" cache="true" maxResults="8" queryDelay="700" />
                                        </p:column>
                                        <p:column style="padding: 0">
                                            <p:autoComplete inputStyle="width:100%" id="standard" value="#{partnerController.selectedTechnical.standard}"  completeMethod="#{partnerController.completeStandards}" cache="true" maxResults="8" queryDelay="700" />

                                        </p:column>
                                        <p:column style="padding: 0">
                                            <p:autoComplete inputStyle="width:100%"  id="tnFrom" value="#{partnerController.selectedTechnical.tnFrom}"  completeMethod="#{partnerController.completeTnFrom}" cache="true" maxResults="8" queryDelay="700" />

                                        </p:column>
                                        <p:column style="padding: 0">
                                            <p:autoComplete inputStyle="width: 100%" id="tnTo" value="#{partnerController.selectedTechnical.tnTo}"  completeMethod="#{partnerController.completeTnTo}" cache="true" maxResults="8" queryDelay="700" />

                                        </p:column>
                                        <p:column style="padding: 0">
                                            <h:inputText  id="priority" style="width: 100%" value="#{partnerController.selectedTechnical.priority}"/>

                                        </p:column>
                                        <p:column style="padding: 0">
                                            <h:inputText id="comments" style="width: 100%" value="#{partnerController.selectedTechnical.comments}"/>

                                        </p:column>


                                    </p:row>



                                </p:panelGrid>
                            </div>
                        </p:tab>   
                    </p:tabView>

                </h:form>
            </div>
        </p:dialog>
    </ui:composition>
</html>
